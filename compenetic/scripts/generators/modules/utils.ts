import path from 'path';
import chalk from 'chalk';

export interface FileOperation {
  operation: 'create' | 'update';
  filePath: string;
  details?: string;
}

/**
 * Ð’ÑÐ¿Ð¾Ð¼Ð¾Ð³Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ð¼Ð¾Ð´ÑƒÐ»ÑŒ Ð³ÐµÐ½ÐµÑ€Ð°Ñ‚Ð¾Ñ€Ð° ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ð¾Ð²
 *
 * Ð­Ñ‚Ð¾Ñ‚ Ð¼Ð¾Ð´ÑƒÐ»ÑŒ Ð¿Ñ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð»ÑÐµÑ‚ Ð½Ð°Ð±Ð¾Ñ€ ÑƒÑ‚Ð¸Ð»Ð¸Ñ‚Ð°Ñ€Ð½Ñ‹Ñ… Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¹ Ð´Ð»Ñ:
 * 1. Ð Ð°Ð±Ð¾Ñ‚Ñ‹ Ñ Ð¿ÑƒÑ‚ÑÐ¼Ð¸ Ñ„Ð°Ð¹Ð»Ð¾Ð²Ð¾Ð¹ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹
 * 2. Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¸Ð¼ÐµÐ½ Ð¸ Ð¸Ð´ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ñ€Ð¾Ð²
 * 3. Ð›Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¹ Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ð¸
 * 4. ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ Ð¾ÑˆÐ¸Ð±Ð¾Ðº
 *
 * ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸:
 * - getLocaleDir() - ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð¿ÑƒÑ‚Ð¸ Ðº Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸ Ð»Ð¾ÐºÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸
 * - formatLocaleVarName() - Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¸Ð¼ÐµÐ½Ð¸ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ð¾Ð¹ Ð»Ð¾ÐºÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸
 * - logFileOperation() - Ð›Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¹ Ñ Ñ„Ð°Ð¹Ð»Ð°Ð¼Ð¸
 * - formatError() - Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹ Ð¾Ð± Ð¾ÑˆÐ¸Ð±ÐºÐ°Ñ…
 *
 * ÐžÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸:
 * - ÐšÑ€Ð¾ÑÑÐ¿Ð»Ð°Ñ‚Ñ„Ð¾Ñ€Ð¼ÐµÐ½Ð½Ð°Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ð° Ñ Ð¿ÑƒÑ‚ÑÐ¼Ð¸
 * - Ð•Ð´Ð¸Ð½Ñ‹Ð¹ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ
 * - Ð¡Ñ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð°Ñ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð¾ÑˆÐ¸Ð±Ð¾Ðº
 *
 * @module utils
 */

/**
 * Formats and logs a file operation
 */
export const logFileOperation = (operation: FileOperation): void => {
  const { operation: op, filePath, details = '' } = operation;
  const relativePath = path.relative(process.cwd(), filePath);
  const icon = op === 'create' ? 'âœ¨' : op === 'update' ? 'ðŸ“' : 'ðŸ”„';
  const color = op === 'create' ? 'green' : op === 'update' ? 'blue' : 'yellow';

  console.log(
    chalk[color](`${icon} ${op.charAt(0).toUpperCase() + op.slice(1)}d:`),
    chalk.bold(relativePath),
    details ? chalk.gray(`(${details})`) : '',
  );
};

/**
 * Formats an error message
 */
export const formatError = (message: string): string => {
  return chalk.red(`âŒ ${message}`);
};

/**
 * Gets the component directory path
 */
export const getComponentDir = (componentName: string, componentsDir: string): string => {
  return path.join(process.cwd(), 'src', componentsDir, componentName);
};

/**
 * Gets the locale directory path
 */
export const getLocaleDir = (): string => {
  return path.join(process.cwd(), 'src', 'locale');
};

/**
 * Formats a component name to match locale variable naming convention
 */
export const formatLocaleVarName = (componentName: string, lang: string): string => {
  return `${componentName.toLowerCase()}${lang.charAt(0).toUpperCase() + lang.slice(1)}`;
};
