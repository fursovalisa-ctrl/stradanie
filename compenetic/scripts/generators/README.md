# Система генерации компонентов SkillGrid

Система генерации компонентов представляет собой CLI-инструмент для автоматического создания и интеграции новых компонентов в проект SkillGrid.

## Содержание

1. [Общее описание](#общее-описание)
2. [Структура генератора](#структура-генератора)
3. [Использование](#использование)
4. [Конфигурация](#конфигурация)
5. [Модули](#модули)
6. [Шаблоны](#шаблоны)

## Общее описание

Генератор компонентов автоматизирует следующие задачи:
- Создание файлов компонента по шаблонам
- Интеграция компонента в систему локализации
- Обновление индексных файлов
- Добавление компонента в приложение
- Создание вспомогательных файлов (хуки, истории, тесты)

## Структура генератора

```
scripts/generators/
├── index.ts           # Точка входа и CLI-интерфейс
├── README.md          # Документация
├── modules/           # Модули генератора
│   ├── config.ts      # Управление конфигурацией
│   ├── files.ts       # Генерация файлов
│   ├── locales.ts     # Управление локализацией
│   ├── templates.ts   # Шаблоны компонентов
│   └── utils.ts       # Вспомогательные функции
├── templates/         # Шаблоны файлов
└── tests/            # Тесты
```

## Использование

### Базовое использование

```bash
yarn skillgrid generate component ComponentName
```

### Опции

- `--i18n` / `--no-i18n` - Генерация файлов локализации
- `--hook` / `--no-hook` - Генерация хука
- `--stories` / `--no-stories` - Генерация историй
- `--index` / `--no-index` - Генерация индексного файла

### Примеры

```bash
# Создание компонента с локализацией и хуком
yarn skillgrid g c Button --i18n --hook

# Создание простого компонента без дополнительных файлов
yarn skillgrid g c Icon --no-i18n --no-hook --no-stories
```

## Конфигурация

Конфигурация генератора управляется через модуль `config.ts` и может быть настроена в файле проекта.

### Основные параметры

- `componentsPath` - Путь к директории компонентов
- `defaultOptions` - Опции по умолчанию для генерации
- `templates` - Настройки шаблонов

## Модули

### config.ts
Модуль управления конфигурацией:
- Загрузка конфигурации проекта
- Обработка опций командной строки
- Слияние пользовательских настроек с дефолтными

### files.ts
Модуль генерации файлов:
- Создание структуры директорий компонента
- Генерация файлов из шаблонов
- Обновление индексных файлов
- Интеграция компонента в приложение

### locales.ts
Модуль управления локализацией:
- Обновление типов локализации
- Интеграция компонента в систему локализации
- Поддержка мультиязычности (en_US, ru_RU)

### templates.ts
Модуль шаблонов:
- Загрузка шаблонов
- Обработка переменных в шаблонах
- Форматирование кода

### utils.ts
Вспомогательные функции:
- Работа с путями
- Форматирование имен
- Логирование операций

## Шаблоны

Шаблоны компонентов находятся в директории `templates/` и включают:

### Основные файлы
- `component.tsx.template` - Шаблон компонента
- `component.type.ts.template` - Шаблон типов
- `component.module.scss.template` - Шаблон стилей

### Дополнительные файлы
- `component.i18n.ts.template` - Шаблон локализации
- `component.hook.ts.template` - Шаблон хука
- `component.stories.tsx.template` - Шаблон историй
- `index.ts.template` - Шаблон индексного файла

## Процесс генерации

1. **Подготовка**
   - Загрузка конфигурации
   - Обработка опций командной строки
   - Валидация имени компонента

2. **Создание файлов компонента**
   - Создание директории компонента
   - Генерация основных файлов
   - Генерация дополнительных файлов (по опциям)

3. **Интеграция в проект**
   - Обновление индексных файлов
   - Интеграция в систему локализации
   - Обновление App.tsx

4. **Завершение**
   - Проверка результатов
   - Логирование операций
   - Вывод статуса генерации

## Обработка ошибок

Система включает комплексную обработку ошибок:
- Валидация входных данных
- Проверка существования файлов
- Обработка ошибок файловой системы
- Логирование ошибок с контекстом

## Расширение функциональности

Для добавления новой функциональности:

1. **Новые опции генерации**
   - Добавить опцию в CLI (index.ts)
   - Обновить обработку опций (config.ts)
   - Добавить соответствующую логику

2. **Новые шаблоны**
   - Создать файл шаблона в templates/
   - Добавить логику обработки в templates.ts
   - Обновить генерацию файлов в files.ts

3. **Новые интеграции**
   - Добавить модуль интеграции
   - Обновить процесс генерации
   - Добавить необходимые тесты 